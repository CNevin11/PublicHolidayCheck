<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Public Holiday Decision Helper</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<meta name="description" content="Answer a few questions and get the exact action you must take during a public holiday week. Supports Taiwan & Ireland." />
<style>html, body { height: 100%; }</style>
</head>
<body class="min-h-screen bg-gray-50">
<div class="max-w-3xl mx-auto p-6">
<header class="mb-6">
<h1 class="text-2xl font-semibold">Public Holiday Decision Helper</h1>
<p class="text-sm text-gray-600 mt-1">Goal: Everyone gets <span class="font-medium">3 days off</span> during a public-holiday week (2 roster days + 1 public holiday). Works for <span class="font-medium">Taiwan</span> and <span class="font-medium">Ireland</span> offices.</p>
</header>
<div id="app"></div>
<footer class="mt-10 text-xs text-gray-500">
<p>Assumptions: Volunteered work on a public holiday can be banked and used later in the same calendar year with manager confirmation; replacement day must be within the same work week and among your normal working days. If the public holiday falls on a rest day, it must be used within the same month. If the public holiday is worked, it can be banked and used anytime within the same calendar year. If country-specific rules differ later, update policy text only; logic remains the same.</p>
</footer>
</div>
<script type="text/babel">
const { useMemo, useState } = React;
const DAYS=[{key:"sun",label:"Sunday"},{key:"mon",label:"Monday"},{key:"tue",label:"Tuesday"},{key:"wed",label:"Wednesday"},{key:"thu",label:"Thursday"},{key:"fri",label:"Friday"},{key:"sat",label:"Saturday"}];
const LOCATIONS=["Taiwan","Ireland"];
const SHIFTS={"Sun–Thurs":{work:["sun","mon","tue","wed","thu"],off:["fri","sat"]},"Mon–Fri":{work:["mon","tue","wed","thu","fri"],off:["sat","sun"]},"Tues–Sat":{work:["tue","wed","thu","fri","sat"],off:["sun","mon"]}};
function determineOutcome({shiftKey,phDayKey,willWork,replacementDayKey}){
  const shift=SHIFTS[shiftKey];
  if(!shift)return{errors:["Choose a shift."]};
  if(!phDayKey)return{errors:["Choose the public holiday day."]};
  const isWorkday=shift.work.includes(phDayKey);
  const actions=[];
  const notes=[];
  const requiresReplacement=!isWorkday;

  if(isWorkday){
    if(willWork){
      actions.push("Work the public holiday.");
      actions.push("Bank this public holiday for later use (anytime within the same calendar year).");
      notes.push("Manager must confirm you worked the day.");
    }else{
      actions.push("Take the public holiday off.");
      notes.push("No replacement day needed.");
    }
  } else {
    actions.push("Pick a replacement day off within the same month.");
    if(!replacementDayKey){
      return{errors:["Select your replacement day off (must be one of your working days)."],requiresReplacement};
    }
    if(!shift.work.includes(replacementDayKey)){
      return{errors:["Replacement day must be one of your working days."],requiresReplacement};
    }
    actions.push(`Use ${labelFor(replacementDayKey)} as your replacement day off.`);
    actions.push("Message your manager to confirm the replacement day.");
    if(willWork){
      actions.push("Work the public holiday.");
      actions.push("Bank this public holiday for later use (anytime within the same calendar year).");
      notes.push("Manager must confirm you worked the day.");
    } else {
      notes.push("Holiday fell on your roster day off. You still keep two roster days off by taking a replacement day this month.");
    }
  }

  return{isWorkday,requiresReplacement,actions,notes};
}

function labelFor(dayKey){return DAYS.find(d=>d.key===dayKey)?.label??dayKey;}
function Pill({children}){return <span className="inline-flex items-center rounded-full border border-gray-300 px-2 py-0.5 text-xs text-gray-700">{children}</span>;}

function App(){
  const[location,setLocation]=useState("");
  const[shiftKey,setShiftKey]=useState("");
  const[phDayKey,setPhDayKey]=useState("");
  const[willWork,setWillWork]=useState(false);
  const[replacementDayKey,setReplacementDayKey]=useState("");
  const[copied,setCopied]=useState(false);

  const outcome=useMemo(()=>determineOutcome({shiftKey,phDayKey,willWork,replacementDayKey}),[shiftKey,phDayKey,willWork,replacementDayKey]);

  const shift=SHIFTS[shiftKey];
  const replacementChoices=shift?DAYS.filter(d=>shift.work.includes(d.key)):[];
  const errors=outcome?.errors??[];

  const summaryText=useMemo(()=>{
    if(errors.length)return"";
    const parts=[];
    parts.push(`Location: ${location||"-"}`);
    parts.push(`Shift: ${shiftKey||"-"}`);
    parts.push(`Public Holiday: ${labelFor(phDayKey)||"-"}`);
    parts.push(`Working on PH: ${willWork?"Yes (banking)":"No"}`);
    if(outcome?.requiresReplacement){
      parts.push(`Replacement Day Off: ${labelFor(replacementDayKey)} (must be within same month)`);
    }
    parts.push("\nActions:");
    (outcome?.actions||[]).forEach((a,i)=>parts.push(`${i+1}. ${a}`));
    if(outcome?.notes?.length){
      parts.push("\nNotes:");
      outcome.notes.forEach(n=>parts.push(`- ${n}`));
    }
    return parts.join("\n");
  },[errors.length,location,shiftKey,phDayKey,willWork,outcome,replacementDayKey]);

  const copySummary=async()=>{
    if(!summaryText)return;
    try{await navigator.clipboard.writeText(summaryText);setCopied(true);setTimeout(()=>setCopied(false),1500);}catch(e){console.error(e);}
  };

  return(
    <div className="space-y-6">
      <section className="grid gap-4 sm:grid-cols-2">
        <div className="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 className="text-sm font-medium">0) Location</h2>
          <select value={location} onChange={e=>setLocation(e.target.value)} className="mt-2 w-full rounded-md border-gray-300 text-sm">
            <option value="" disabled>Choose location…</option>
            {LOCATIONS.map(k=><option key={k} value={k}>{k}</option>)}
          </select>
        </div>
        <div className="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 className="text-sm font-medium">1) Your shift</h2>
          <select value={shiftKey} onChange={e=>{setShiftKey(e.target.value);setReplacementDayKey("");}} className="mt-2 w-full rounded-md border-gray-300 text-sm">
            <option value="" disabled>Choose shift…</option>
            {Object.keys(SHIFTS).map(k=><option key={k} value={k}>{k}</option>)}
          </select>
          {shiftKey&&<p className="mt-2 text-xs text-gray-600">Work days: {SHIFTS[shiftKey].work.map(labelFor).join(", ")} · Off days: {SHIFTS[shiftKey].off.map(labelFor).join(", ")}</p>}
        </div>
        <div className="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 className="text-sm font-medium">2) Public holiday day</h2>
          <select value={phDayKey} onChange={e=>setPhDayKey(e.target.value)} className="mt-2 w-full rounded-md border-gray-300 text-sm">
            <option value="" disabled>Choose day…</option>
            {DAYS.map(d=><option key={d.key} value={d.key}>{d.label}</option>)}
          </select>
        </div>
        <div className="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 className="text-sm font-medium">3) Will you work on the public holiday?</h2>
          <div className="mt-2 flex items-center gap-4 text-sm">
            <label className="inline-flex items-center gap-2"><input type="radio" name="willWork" checked={!willWork} onChange={()=>setWillWork(false)} />No</label>
            <label className="inline-flex items-center gap-2"><input type="radio" name="willWork" checked={willWork} onChange={()=>setWillWork(true)} />Yes, work & bank it</label>
          </div>
        </div>
        <div className="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 className="text-sm font-medium">4) Replacement day (only if PH falls on your roster day off)</h2>
<input type="text" 
  value={replacementDayKey} 
  onChange={e=>setReplacementDayKey(e.target.value)} 
  placeholder="MMDDYYYY" 
  className="mt-2 w-full rounded-md border-gray-300 text-sm"
  disabled={!shiftKey||!phDayKey||(shiftKey&&phDayKey&&SHIFTS[shiftKey].work.includes(phDayKey))}
/>
<p className="mt-2 text-xs text-gray-600">Enter replacement day in MMDDYYYY (must be within same month and one of your working days).</p>
        </div>
      </section>
      <section className="rounded-2xl border bg-white p-5 shadow-sm">
        <div className="flex items-center justify-between gap-4">
          <h3 className="text-sm font-semibold">Result</h3>
          <div className="flex items-center gap-2">
            <Pill>{location||"No location"}</Pill>
            <Pill>{shiftKey||"No shift"}</Pill>
            <Pill>PH: {phDayKey?labelFor(phDayKey):"—"}</Pill>
            <Pill>{willWork?"Working & banking":"Not working"}</Pill>
          </div>
        </div>
        {errors.length>0?<ul className="mt-3 list-disc pl-5 text-sm text-red-600">{errors.map((e,i)=><li key={i}>{e}</li>)}</ul>:(<div className="mt-3 space-y-3"><ol className="list-decimal pl-5 text-sm">{(outcome.actions||[]).map((a,i)=><li key={i} className="mb-1">{a}</li>)}
          </ol>{outcome.notes?.length?<div className="rounded-lg bg-gray-50 p-3 text-xs text-gray-700"><p className="font-medium">Notes</p><ul className="mt-1 list-disc pl-5">{outcome.notes.map((n,i)=><li key={i}>{n}</li>)}</ul></div>:null}
          <div className="flex items-center gap-2"><button onClick={copySummary} className="rounded-lg border bg-black px-3 py-1.5 text-xs font-medium text-white hover:opacity-90">Copy Summary</button>{copied&&<span className="text-xs text-green-700">Copied.</span>}</div></div>)}
      </section>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("app")).render(<App />);
</script>
</body>
</html>
